(function(e){function t(t){for(var a,r,c=t[0],s=t[1],u=t[2],l=0,p=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({"AddChapter~EditChapter":"AddChapter~EditChapter",AddChapter:"AddChapter",EditChapter:"EditChapter",about:"about",viewBookChapter:"viewBookChapter",viewChapter:"viewChapter"}[e]||e)+"."+{"AddChapter~EditChapter":"bd9be928",AddChapter:"45f76503",EditChapter:"9851dc64",about:"679a0b24",viewBookChapter:"719d7b4c",viewChapter:"2c7f5f69"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"AddChapter~EditChapter":1,AddChapter:1,EditChapter:1,viewBookChapter:1,viewChapter:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({"AddChapter~EditChapter":"AddChapter~EditChapter",AddChapter:"AddChapter",EditChapter:"EditChapter",about:"about",viewBookChapter:"viewBookChapter",viewChapter:"viewChapter"}[e]||e)+"."+{"AddChapter~EditChapter":"41aafcf7",AddChapter:"3c3e6108",EditChapter:"719767fe",about:"31d6cfe0",viewBookChapter:"ccc26714",viewChapter:"dd590247"}[e]+".css",o=s.p+a,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){u=p[c],l=u.getAttribute("data-href");if(l===a||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],d.parentNode.removeChild(d),n(i)},d.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",p.name="ChunkLoadError",p.type=a,p.request=r,n[1](p)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/public/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},4021:function(e,t,n){"use strict";var a=n("6927"),r=n.n(a);r.a},"4fc1":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("5c96"),o=n.n(r),i=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("layout")],1)}),c=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100vh"}},[n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("j-aside")],1),n("el-container",[n("div",{staticStyle:{width:"100%","overflow-y":"scroll",height:"100vh"}},[n("router-view")],1)])],1)],1)},u=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-col",[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.defaultActive},on:{select:e.goto,open:e.handleOpen,close:e.handleClose}},e._l(e.memus,(function(t,a){return n("el-menu-item",{key:t.title,attrs:{index:a+1+""}},[n("i",{staticClass:"el-icon-setting"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])})),1)],1)],1)},p=[],d={data:function(){return{name:"aside",memus:"",defaultActive:""}},created:function(){this.memus=this.$store.state.menus},computed:{},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},goto:function(e,t){var n=this.memus[e-1];this.$route.path!==n.path&&this.$router.push(n.path)}}},h=d,f=n("2877"),g=Object(f["a"])(h,l,p,!1,null,null,null),b=g.exports,m={components:{jAside:b}},v=m,C=(n("4021"),Object(f["a"])(v,s,u,!1,null,null,null)),w=C.exports,x={components:{layout:w}},k=x,y=(n("7faf"),Object(f["a"])(k,i,c,!1,null,null,null)),P=y.exports,O=(n("d3b7"),n("8c4f")),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"books-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookList,border:""}},[n("el-table-column",{attrs:{fixed:"",prop:"index",label:"索引"}}),n("el-table-column",{attrs:{prop:"aid",label:"书籍ID"}}),n("el-table-column",{attrs:{prop:"title",label:"书名"}}),n("el-table-column",{attrs:{prop:"author",label:"作者"}}),n("el-table-column",{attrs:{prop:"length",label:"章节数"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v("查看")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.editClick(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.delClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),n("el-pagination",{attrs:{"page-sizes":[5,10,20,40],"page-size":e.pageSize,"pager-count":5,"current-page":e.currentPage,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}})],1)},E=[],T=(n("a4d3"),n("99af"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("96cf"),n("ade3")),z=n("2f62");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(T["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={name:"home",methods:j({},Object(z["b"])(["getBookList"]),{},Object(z["b"])("home",["setTotal","setPageSize","setCurrentPage"]),{handleClick:function(e){this.$store.commit("mBook/setCurrentPage",1),this.$router.push("/public/view-book-chapter/".concat(e.index,"/").concat(e.aid))},editClick:function(e){},delClick:function(e){},sizeChange:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.setPageSize(e),t.next=3,regeneratorRuntime.awrap(this.getBookList({currentPage:this.currentPage,pageSize:e}));case 3:case"end":return t.stop()}}),null,this)},currentChange:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.setCurrentPage(e),t.next=3,regeneratorRuntime.awrap(this.getBookList({currentPage:e,pageSize:this.pageSize}));case 3:case"end":return t.stop()}}),null,this)}}),created:function(){},mounted:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.getBookList({pageSize:this.pageSize,currentPage:this.currentPage}));case 2:case"end":return e.stop()}}),null,this)},data:function(){return{}},computed:j({},Object(z["c"])("home",{total:function(e){return e.total},pageSize:function(e){return e.pageSize},currentPage:function(e){return e.currentPage},bookList:function(e){return e.bookList}}))},_=A,L=(n("c219"),Object(f["a"])(_,S,E,!1,null,null,null)),R=L.exports;a["default"].use(O["a"]);var V=[{path:"/",name:"home",component:R},{path:"/public/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/public/view-book-chapter/:index/:aid",name:"viewBookChapter",component:function(){return n.e("viewBookChapter").then(n.bind(null,"0a94"))}},{path:"/public/view-chapter/:index/:aid/:cid",name:"viewChapter",component:function(){return n.e("viewChapter").then(n.bind(null,"a60f"))}},{path:"/public/edit-chapter/:index/:aid/:cid",name:"EditChapter",component:function(){return Promise.all([n.e("AddChapter~EditChapter"),n.e("EditChapter")]).then(n.bind(null,"f1fa"))}},{path:"/public/add-chapter",name:"AddChapter",component:function(){return Promise.all([n.e("AddChapter~EditChapter"),n.e("AddChapter")]).then(n.bind(null,"c6b7"))}}],$=new O["a"]({mode:"history",base:"/public/",routes:V}),D=$;n("1c46");var N=n("bc3a"),I=n.n(N),M=n("4328"),J=n.n(M),q="",F={getBookList:function(e){return I.a.get("".concat(q,"books"),{params:e})},getBook:function(e){return I.a.get("".concat(q,"book"),{params:e})},nextBook:function(e){return I.a.get("".concat(q,"next-book"),{params:e})},delBook:function(e){return I.a.post("".concat(q,"delete-book"),J.a.stringify(e))},getChapter:function(e){return I.a.post("".concat(q,"get-chapter"),J.a.stringify(e))},nextChapter:function(e){return I.a.post("".concat(q,"next-chapter"),J.a.stringify(e))},setChapter:function(e){return I.a.post("".concat(q,"set-chapter"),J.a.stringify(e))},editChapters:function(e){return I.a.post("".concat(q,"edit-chapters"),J.a.stringify(e))},insertChapters:function(e){return I.a.post("".concat(q,"insert-chapters"),J.a.stringify(e))},creChapter:function(e){return I.a.post("".concat(q,"cre-chapter"),J.a.stringify(e))},delChapters:function(e){return I.a.post("".concat(q,"del-chapters"),J.a.stringify(e))},delChapter:function(e){return I.a.post("".concat(q,"del-chapter"),J.a.stringify(e))}},H={namespaced:!0,state:{total:0,pageSize:5,currentPage:1,bookList:[]},mutations:{setTotal:function(e,t){e.total=t},setPageSize:function(e,t){e.pageSize=t},setCurrentPage:function(e,t){e.currentPage=t},setBookList:function(e,t){e.bookList=t}},actions:{setTotal:function(e,t){var n=e.commit;n("setTotal",t)},setPageSize:function(e,t){var n=e.commit;n("setPageSize",t)},setCurrentPage:function(e,t){var n=e.commit;n("setCurrentPage",t)},setBookList:function(e,t){var n=e.commit;n("setBookList",t)}},getters:{}},K={namespaced:!0,state:{total:0,pageSize:5,currentPage:1,book:{}},mutations:{getBook:function(e,t){e.book=t,t.chapters.length<3&&console.log(t.index,t.aid)},setTotal:function(e,t){e.total=t},setPageSize:function(e,t){e.pageSize=t},setCurrentPage:function(e,t){e.currentPage=t}},actions:{getBook:function(e,t){var n,a,r,o,i,c;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return n=e.commit,a=t.index,r=t.aid,o=t.currentPage,i=t.pageSize,s.next=4,regeneratorRuntime.awrap(F.getBook({index:a,aid:r,currentPage:o,pageSize:i}));case 4:c=s.sent,n("getBook",c.data),n("setTotal",c.data.total),n("setPageSize",i),n("setCurrentPage",o);case 9:case"end":return s.stop()}}))},setTotal:function(e,t){var n=e.commit;n("setTotal",t)},setPageSize:function(e,t){var n=e.commit;n("setPageSize",t)},setCurrentPage:function(e,t){var n=e.commit;n("setCurrentPage",t)},nextBookPage:function(e,t){var n,a,r;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:if(e.commit,e.state,n=t.page,a=t.index,!(a>-1)){o.next=7;break}return o.next=5,regeneratorRuntime.awrap(F.nextBook({index:a}));case 5:r=o.sent,n.$router.push("/view-book-chapter/".concat(a,"/").concat(r.data));case 7:case"end":return o.stop()}}))}}},U=(n("c975"),n("b0c0"),{namespaced:!0,state:{editableTabsValue:"1",editableTabs:[{title:"书籍列表",name:"1",content:"/"}],tabIndex:1},mutations:{addTab:function(e,t){e.editableTabsValue=t.name,console.log(),-1===JSON.stringify(e.editableTabs).indexOf(t.title)&&(e.editableTabs.push(t),++e.tabIndex)},tabPage:function(e,t){console.log(t),e.editableTabsValue=t},goPage:function(e,t,n){e.editableTabsValue="".concat(t)},removeTab:function(e,t){var n=e.editableTabs,a=e.editableTabsValue;a===t&&n.forEach((function(e,r){if(e.name===t){var o=n[r+1]||n[r-1];o&&(a=o.name)}})),e.editableTabsValue=a,e.editableTabs=n.filter((function(e){return"1"===e.name||e.name!==t}))},edit:function(e,t,n){console.log(t),console.log(n)},setDialogVisible:function(e,t){e.dialogVisible=t}}}),G=(n("5319"),n("1276"),{namespaced:!0,state:{chapter:{},content:"",title:"",newChapter:{},dialogVisible:!1},mutations:{initChapter:function(e){e.chapter={},e.content="",e.title=""},getChapter:function(e,t){e.chapter={},e.chapter=t},setChapter:function(e,t){e.book=t},setContent:function(e,t){e.content=t},setTitle:function(e,t){e.title=t},setNewChapter:function(e,t){console.log("newChapter",t),e.newChapter=t},setDialogVisible:function(e,t){e.dialogVisible=t}},actions:{nextChapter:function(e,t){var n,a,r,o,i,c,s,u;return regeneratorRuntime.async((function(l){while(1)switch(l.prev=l.next){case 0:return e.commit,n=t.page,a=t.index,r=t.aid,o=t.cid,i=t.next,c=t.path,l.prev=2,l.next=5,regeneratorRuntime.awrap(F.nextChapter({index:a,aid:r,cid:o,next:i}));case 5:s=l.sent,u=s.data,"".concat(u).indexOf("cid")<0&&n.$router.push("/".concat(c,"/").concat(a,"/").concat(r,"/").concat(u)),l.next=13;break;case 10:l.prev=10,l.t0=l["catch"](2),console.log(l.t0);case 13:case"end":return l.stop()}}),null,null,[[2,10]])},getChapter:function(e,t){var n,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.next=3,regeneratorRuntime.awrap(F.getChapter(t));case 3:a=r.sent,n("getChapter",a.data),n("setContent",a.data.content),n("setTitle",a.data.title);case 7:case"end":return r.stop()}}))},setChapter:function(e,t){var n,a,r,o,i,c,s;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:return e.commit,u.prev=1,n=t.format,a=void 0!==n&&n,r=t.content,a&&(o=r.split("</p>"),o.length<5&&r.indexOf("&nbsp;&nbsp;&nbsp;&nbsp;")>-1&&(r=r.replace("<p>","").replace("</p>",""),i=r.split("&nbsp;&nbsp;&nbsp;&nbsp;"),c="",i.forEach((function(e){""!==e&&(c+="<p>&nbsp;&nbsp;&nbsp;&nbsp;".concat(e,"</p>"))})),c.replace("<p>&nbsp;</p>",""),t.content=c),o.length<5&&r.indexOf("<p>&nbsp;</p>")>-1&&(s="",s=t.content.replace("<p>&nbsp;</p>",""),t.content=s)),u.next=7,regeneratorRuntime.awrap(F.setChapter(t));case 7:u.next=12;break;case 9:u.prev=9,u.t0=u["catch"](1),console.log(u.t0);case 12:case"end":return u.stop()}}),null,null,[[1,9]])},setContent:function(e,t){var n=e.commit;n("setContent",t)},setTitle:function(e,t){var n=e.commit;n("setTitle",t)},setNewChapter:function(e,t){var n=e.commit;n("setNewChapter",t)},setDialogVisible:function(e,t){var n=e.commit;n("setDialogVisible",t)},createChapter:function(e,t){e.commit;var n=t.book_index,a=t.index,r=t.aid,o=t.cid,i=t.title,c=t.content,s=t.href;F.creChapter({book_index:n,index:a,aid:r,cid:o,title:i,content:c,href:s})},deleteChapter:function(e,t){var n,a,r,o,i;return regeneratorRuntime.async((function(c){while(1)switch(c.prev=c.next){case 0:return e.commit,n=e.state,a=t.index,r=t.aid,o=t.cid,console.log(a,r,o),console.log(n),c.next=6,regeneratorRuntime.awrap(F.delChapter({index:a,aid:r,cid:o}));case 6:i=c.sent,console.log(i);case 8:case"end":return c.stop()}}))}}}),Q={dialogVisible:!1,book:{},chapter:{},editableTabsValue:"1",editableTabs:[{title:"书籍列表",name:"1",content:"/"}],tabIndex:1,menus:[{title:"书籍列表",name:"1",path:"/"},{title:"增加书籍",name:"2",path:"/about"}]},W={},X={getBookList:function(e,t){var n,a,r,o,i,c,s;return regeneratorRuntime.async((function(u){while(1)switch(u.prev=u.next){case 0:return n=e.commit,a=t.currentPage,r=t.pageSize,u.prev=2,u.next=5,regeneratorRuntime.awrap(F.getBookList({currentPage:a,pageSize:r}));case 5:o=u.sent,i=o.data,c=i.total,s=i.data,n("home/setTotal",c),n("home/setBookList",s),u.next=14;break;case 11:u.prev=11,u.t0=u["catch"](2),console.log(u.t0);case 14:case"end":return u.stop()}}),null,null,[[2,11]])}};a["default"].use(z["a"]);var Y=new z["a"].Store({strict:!1,state:Q,mutations:W,actions:X,modules:{home:H,mBook:K,tabs:U,mChapter:G}});a["default"].use(o.a),a["default"].config.productionTip=!1,D.beforeEach((function(e,t,n){n()})),new a["default"]({router:D,store:Y,render:function(e){return e(P)}}).$mount("#app")},6927:function(e,t,n){},"7faf":function(e,t,n){"use strict";var a=n("b8ff"),r=n.n(a);r.a},b8ff:function(e,t,n){},c219:function(e,t,n){"use strict";var a=n("4fc1"),r=n.n(a);r.a}});
//# sourceMappingURL=app.b9d81d39.js.map